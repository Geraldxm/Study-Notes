## 假期进展
- 复现 《Privacy Protection in Surveillance Videos Using Block Scrambling-Based Encryption and DCNN-Based Face Detection》2022
	- 先识别，再加密
	- 单帧操作
	- 保存参数可复原，高度加密，效果好
- 综述 《视觉身份隐私保护：人脸匿名化研究方法》2023
	- 图像匿名化方法
		- 语义修改的
		- 语义保持的
		- 视觉可恢复的
		- 深度学习中的
	- 视频匿名化方法
		- 聚焦面部区域隐私的视频匿名化方法
		- 面向生物特征隐私的视频匿名化方法
## 4.22 想法
- 最终场景是监控视频中，无权限访问者只能访问匿名图像，有权限访问者可以对视频进行视觉恢复。
	- 仍然是面部识别+加密
	- 加密优先为匿名面部，也可以马赛克
	- 原图--密码-->匿名图像--密码-->原图
		- 该方案不错
- 图像：看一下视觉可恢复的方法FIT、MfM
- 视频：聚焦面部区域隐私的视频匿名化方法，CIAGAN，JaGAN
- ![[Pasted image 20240422143926.png]]
### Temporally coherent video anonymization through GAN inpainting
- 预印本
- 提出了JaGAN，一个两阶段系统
	- 第一阶段，在视频的所有单独帧中检测并用黑色图像斑块遮盖人脸
	- 第二阶段，利用一个GAN，该网络旨在用人工生成的人脸修复缺失的图像补丁
- 解决的问题
	- 基于图像的GAN模型在相邻视频帧间会闪烁
	- 引入了 `Identity Invariance Score, IdI` 作为量化相邻帧之间时间相关性的方法
	- 提出burn-in，解决了第一帧模糊的问题
- 数据集
	- FDF Image Dataset
		- Flickr多样化数据集（FDF）是从Flickr网站上抓取的，包含147万张野生人脸，最小分辨率为128×128像素。人脸已经自动标注了7个面部标志和一个边界框，在年龄、种族、面部绘画、面部姿势、遮挡对象和图像背景方面具有很大的多样性。FDF是隐式设计的，用于训练生成模型，以实现人脸匿名化。Hukkelas等人[13]提供了更多细节。
	- JaGAN Dataset
		- 抓取了一个视频帧数据集，youtube视频数据集，开源
		- 10万个视频；性别、年龄、种族、姿势（正面，侧面，肖像）多样性
		- 抓取过程
			- Seed Faces Collection
				- 手动选取一组种子视频，提取人脸，然后爬取和种子视频相关的视频添加到种子视频库中，重复
				- 对`Seed Video Pool` 中的视频进行特征分布评估，将不足的类别手动添加
			- Video Collection
				- 在给定了人脸池的情况下，使用**IOU跟踪器**，如果跟踪至少30帧可行，且有高的dHash [17]相似度，就保留片段
		- 在编译数据集时，以人脸边界框为中心进行裁剪，并缩放到256px的大小。
		- 数据集大约40万帧，1200万个人脸
- 1：基于GAN的图像匿名和预处理
	- 借鉴了两阶段方法、`Spatially Discounted Reconstruction Loss` 、`R1 Regularization` 
	- 粗糙阶段
		- 主要是U-Net，输入(5,h,w) 额外的是边界mask和匿名mask
	- 精细阶段
		- 卷积前端，9个残差块，转置卷积后端
	- ![[Pasted image 20240522150132.png]]
	- Discriminator
		- 多尺度的鉴别器，在原图、下采样二倍、下采样四倍下运行，每一个都训练
	- Pre-Processing
		- 用DSFD检测人脸，生成边界框，框内部内容删除
		- 减少大边的长度，得到正方形，然后边长扩大三倍，超出边界的用掩码表示；面部也用掩码表示。
	- Loss 函数
		- 最小二乘损失
- 2：Temporally Coherent Video Anonymization
	- 提出了一个时间相干的视频匿名化方法
	- 生成器的输入改为三个图像，两张前一帧的图像，一张当前需要修复的图像
		- 但是使用过去的两张图像，将生成器设置在前一个序列上
	- 鉴别器
		- 额外使用了一个条件视频鉴别器（Conditional Video Discriminator） Vid2Vid[38]，真实视频和生成视频的帧速率被下采样3倍，用于加强连续帧之间的时间一致性
	- 运用了`burn-in` 技术，改进视频起始帧的推理结果
		- 在生成第一个帧前，创建一系列6个帧，每个后续帧将前面两个作为输入
	
### Password-Conditioned Anonymization and Deanonymization with Face Identity Transformers (10)
- 提出了一种人脸身份转换器 `face identity transformer` 
	- 匿名化后删除身份信息
	- 给定正确密码后恢复原始人脸
	- 给定错误密码后，返回错误但是逼真的人脸
	- 不需要在磁盘上存储用户的真实人脸，只需要存储匿名的
	- 最小内存消耗
		- 使用一个身份转换器，就可以实现匿名化，又可以去匿名化
	- 变换后不影响背景
	- 用p加密，用-p解密
	- 多样性
- 一个可以匿名化和去匿名化人脸的单一人脸身份转换器
	- 背景环境不变，没有伪影
	- 使用密码p进行匿名化
- 数据集
	- CASIA
		- 46万张人脸，10万个身份
	- LFW
		- 用于泛化测试
	- FFHQ
		- 用于泛化测试
- 构建
	- 条件GAN，以输入的图像I和密码p为条件
		1. N-bit p, 通道拼接为 H * W * (3+N)
		2. Info-GAN
		3. 设计了辅助网络Q(I, TpI) = p_hat，从输入和转换图像猜测密码
			1. 对Q使用交叉熵损失
		4. 但是即使使用了辅助网络Q，只能在颜色和纹理上观察到变化，**没有在更高级的语义上观察到转化**，因此引入了明确的
	- 特征相异性损失
		- 使用人脸识别模型F来提取embeddings，当使用不同p1,p2时，要求最小化之间的余弦距离
		- 将该loss应用在
			- 两个使用不同密码的匿名人脸
			- 两个给定不同错误密码的去匿名人脸
			- 匿名人脸和错误恢复的去匿名人脸
		- **当模型输出不一定像人脸的非常不同的内容时，这个损失会被轻易的满足**，因此引入
	- 多任务学习目标
		- 用于保留生成器生成图像足够 像 人脸
	- 重建损失
		- 要求 正确密码恢复的人脸 保持 同样的标签（在Face Classifier下）
	- 背景保留损失
		- 在整个图像上应用L1损失
	- 照片真实性损失
		- 用PatchGAN来限制鉴别器对局部图像块的过度关注
### Personalized and Invertible Face De-identification by Disentangled Identity Information Manipulation (11)
- ICCV，上交
- 数据集
- 密码p，相似度d
	- 不同的p产生不同的去标识化结果
	- 不同的d用来控制相似性，与origin的区别
- 网络构建
	- Identity Encoder：使用预先训练的人脸识别模型作为身份编码器Eid，并且给定图像X的身份表示zid=Eid（X）取自最终完全连接层之前的最后一个特征向量。
	- Attribute Encoder：属性编码器，保留属性的细节，表示为多级特征图，采取类似U-NET的结构
	- Identity Modification Module：身份修改模块，旋转身份向量来更改身份信息
	- Generator：
## 5.7 想法
- 复现一个上面两种其中一种GAN，然后应用在视频中（数据集可能需要换），由于使用密码可以直接得到保持的人面部，所以可能不需要使用多帧不闪烁的技术
- "Temporally Coherent Video..."保证多帧不闪烁的技术，